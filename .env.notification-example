# .env.example - Enhanced Notification Center Configuration

# Basic settings (existing)
BASE_URL=http://localhost:8000
DATABASE_URL=sqlite:///./app_data.db

# Existing alerting settings
ALERTING_ENABLED=true
TELEGRAM_BOT_TOKEN=your_telegram_bot_token
TELEGRAM_CHAT_ID=your_telegram_chat_id
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your_email@gmail.com
SMTP_PASSWORD=your_app_password
ADMIN_EMAILS=admin@example.com

# Enhanced Notification Center Settings

# Synchronization intervals
NOTIFICATION_SYNC_INTERVAL=300                    # 5 minutes between sync cycles
NOTIFICATION_CLEANUP_INTERVAL=3600                # 1 hour between cleanup cycles
NOTIFICATION_RETENTION_DAYS=30                    # Delete notifications after 30 days
NOTIFICATION_AUTO_ARCHIVE_HOURS=24                # Archive read notifications after 24 hours
NOTIFICATION_DEDUP_WINDOW=300                     # 5 minutes window for deduplication

# Webhook integration settings
WEBHOOK_URLS=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK,https://webhook.example.com/notify
WEBHOOK_TIMEOUT=30                                # Timeout for webhook requests in seconds
WEBHOOK_MAX_RETRIES=3                             # Maximum retry attempts for failed webhooks

# Notification routing by priority
CRITICAL_NOTIFICATION_ROUTES=telegram,email,webhook  # Routes for critical notifications
HIGH_NOTIFICATION_ROUTES=telegram,email             # Routes for high priority notifications
MEDIUM_NOTIFICATION_ROUTES=email                   # Routes for medium priority notifications
LOW_NOTIFICATION_ROUTES=                           # Routes for low priority notifications (empty = no routing)

# Enable/disable specific integrations
NOTIFICATION_TELEGRAM_ENABLED=true                 # Enable Telegram integration
NOTIFICATION_EMAIL_ENABLED=true                    # Enable email integration
NOTIFICATION_WEBHOOK_ENABLED=false                 # Enable webhook integration

# Database settings for notifications (optional separate database)
NOTIFICATIONS_DATABASE_URL=sqlite:///./notifications.db

# Monitoring thresholds (existing)
CPU_THRESHOLD=80.0
MEMORY_THRESHOLD=85.0
DISK_THRESHOLD=90.0

# Rate limiting
RATE_LIMIT_ENABLED=true
GLOBAL_RATE_LIMIT=100/minute
AUTH_RATE_LIMIT=5/minute

# Example webhook configurations for different services

# Slack webhook
# WEBHOOK_URLS=https://hooks.slack.com/services/T00000000/B00000000/XXXXXXXXXXXXXXXXXXXXXXXX

# Discord webhook
# WEBHOOK_URLS=https://discord.com/api/webhooks/1234567890/ABCDEF1234567890

# Microsoft Teams webhook
# WEBHOOK_URLS=https://outlook.office.com/webhook/ABCDEF1234567890@ABCDEF1234567890/IncomingWebhook/ABCDEF1234567890/ABCDEF1234567890

# Custom webhook service
# WEBHOOK_URLS=https://your-monitoring-system.com/api/webhooks/notifications

# Priority routing examples:

# Critical: All channels (immediate attention required)
# CRITICAL_NOTIFICATION_ROUTES=telegram,email,webhook

# High: Important but not critical (Telegram + Email)
# HIGH_NOTIFICATION_ROUTES=telegram,email

# Medium: Standard notifications (Email only)
# MEDIUM_NOTIFICATION_ROUTES=email

# Low: Informational only (no external routing)
# LOW_NOTIFICATION_ROUTES=

# Integration-specific settings:

# For Telegram integration:
# TELEGRAM_BOT_TOKEN=bot123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11
# TELEGRAM_CHAT_ID=123456789

# For Email integration:
# SMTP_SERVER=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USERNAME=your-email@gmail.com
# SMTP_PASSWORD=your-app-specific-password
# EMAIL_FROM=your-email@gmail.com
# ADMIN_EMAILS=admin1@example.com,admin2@example.com

# Performance tuning:

# For high-volume systems, consider:
# NOTIFICATION_SYNC_INTERVAL=60                     # More frequent sync (1 minute)
# NOTIFICATION_CLEANUP_INTERVAL=1800               # More frequent cleanup (30 minutes)
# NOTIFICATION_RETENTION_DAYS=7                     # Shorter retention for storage
# WEBHOOK_TIMEOUT=10                                # Shorter timeout for faster processing

# For low-resource systems, consider:
# NOTIFICATION_SYNC_INTERVAL=600                    # Less frequent sync (10 minutes)
# NOTIFICATION_CLEANUP_INTERVAL=7200               # Less frequent cleanup (2 hours)
# NOTIFICATION_RETENTION_DAYS=90                    # Longer retention
# WEBHOOK_TIMEOUT=60                               # Longer timeout for reliability

# Security considerations:

# Use HTTPS for webhook URLs
# WEBHOOK_URLS=https://secure-webhook.example.com/api/notify

# Consider authentication for webhooks
# Some services support API keys in headers or URL parameters

# Monitoring and debugging:

# Enable detailed logging for troubleshooting
# LOG_LEVEL=DEBUG

# Monitor webhook delivery success rates
# Check /notifications-management/integrations/status endpoint

# Monitor queue sizes and processing times
# Check /notifications-management/webhooks/queue endpoint

# Example webhook payload format:
# {
#   "title": "Alert: High CPU Usage",
#   "message": "CPU usage exceeded 90% threshold",
#   "priority": "HIGH",
#   "source": "monitoring",
#   "service_name": "web_server",
#   "event_data": {
#     "cpu_usage": 92.5,
#     "threshold": 90.0,
#     "timestamp": "2024-01-01T12:00:00Z"
#   }
# }