# ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ½Ñ‹Ğ¹ Ğ¾Ğ±Ğ·Ğ¾Ñ€ Vertex AR

**Ğ’ĞµÑ€ÑĞ¸Ñ:** 1.3.0 | **Ğ”Ğ°Ñ‚Ğ°:** 10 Ğ½Ğ¾ÑĞ±Ñ€Ñ 2024

---

## ğŸ“ ĞĞ±Ñ‰Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CLIENT LAYER                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚ â”‚ Web Browser  â”‚  â”‚ Mobile App   â”‚  â”‚ AR Viewer    â”‚           â”‚
â”‚ â”‚ (Admin)      â”‚  â”‚ (iOS/Android)â”‚  â”‚ (A-Frame)    â”‚           â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚        â”‚                 â”‚                 â”‚                    â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                          â”‚                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    NETWORK / TRANSPORT                           â”‚
â”‚              (HTTPS, WebSocket, HTTP/2)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      API GATEWAY / REVERSE PROXY                â”‚
â”‚                   (Nginx with Rate Limiting)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                         APPLICATION LAYER                       â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              FastAPI Application (main.py)             â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚           Middleware Stack                      â”‚  â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚   â”‚
â”‚  â”‚  â”‚ 1. CORS Middleware                              â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ 2. RequestLoggingMiddleware (tracing)           â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ 3. ErrorLoggingMiddleware (error handling)      â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ 4. ValidationErrorLoggingMiddleware             â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ 5. Rate Limiter (global/auth/upload)           â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                                                        â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚  â”‚         API Routes (50+ endpoints)           â”‚    â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚   â”‚
â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”‚ Auth (7)     â”‚  â”‚ Users (8)    â”‚          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”‚ register     â”‚  â”‚ list         â”‚          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”‚ login        â”‚  â”‚ get_by_id    â”‚          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”‚ logout       â”‚  â”‚ update       â”‚          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”‚ refresh      â”‚  â”‚ delete       â”‚          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”‚ profile      â”‚  â”‚ lock/unlock  â”‚          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”‚ change-pass  â”‚  â”‚ reset-pass   â”‚          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ get_stats    â”‚          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚                                              â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”‚ Clients (7)  â”‚  â”‚ Portraits(8) â”‚          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”‚ list         â”‚  â”‚ list         â”‚          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”‚ get_by_id    â”‚  â”‚ get_by_id    â”‚          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”‚ create       â”‚  â”‚ upload       â”‚          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”‚ update       â”‚  â”‚ update       â”‚          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”‚ delete       â”‚  â”‚ delete       â”‚          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”‚ search       â”‚  â”‚ marker_gen   â”‚          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”‚ get_portraitsâ”‚  â”‚ preview â­   â”‚          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚                                              â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”‚ Videos (4)   â”‚  â”‚ Orders (5)   â”‚          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”‚ upload       â”‚  â”‚ list         â”‚          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”‚ get_by_id    â”‚  â”‚ create       â”‚          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”‚ delete       â”‚  â”‚ get_by_id    â”‚          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”‚ set_active   â”‚  â”‚ update       â”‚          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ delete       â”‚          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚                                              â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”‚ AR (3)       â”‚  â”‚ Admin (3)    â”‚          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”‚ view         â”‚  â”‚ dashboard â­ â”‚          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”‚ marker       â”‚  â”‚ stats        â”‚          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”‚ qr           â”‚  â”‚ marker-gen   â”‚          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚                                              â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”‚ Notif. (3)   â”‚  â”‚ Health (3)   â”‚          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”‚ list         â”‚  â”‚ /health      â”‚          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”‚ mark-read    â”‚  â”‚ /health/db   â”‚          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â”‚ delete       â”‚  â”‚ /health/stor â”‚          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚                                              â”‚    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â”‚                                                        â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚  â”‚     Core Services & Utilities                â”‚    â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Authentication & Authorization (JWT)       â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Session Management & Token Lifecycle       â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ File Validation (magic bytes, MIME)        â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Data Validation (email, phone, URL)        â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Preview Generator (image/video)            â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ NFT Marker Generator (feature detection)   â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Notification Handler                       â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Error & Exception Handling                 â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Structured Logging (JSON)                  â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Rate Limiting (per-user, global)           â”‚    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â”‚                                                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    PERSISTENCE LAYER                            â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              SQLAlchemy ORM                            â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚        Database (SQLite / PostgreSQL)           â”‚  â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Users (id, username, email, role, status)    â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Clients (id, phone, name, created_at)        â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Portraits (id, client_id, image, video)      â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Videos (id, portrait_id, path, active)       â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Orders (id, client_id, status, created_at)   â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Notifications (id, user_id, type, status)    â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Audit Logs (id, user_id, action, timestamp)  â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    STORAGE LAYER                                â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚           Storage Adapter Pattern                      â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚                                                        â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚ Local Storage    â”‚       â”‚ MinIO / S3 Storage   â”‚ â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚   â”‚
â”‚  â”‚  â”‚ /storage/        â”‚       â”‚ S3-compatible API    â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ â”œâ”€â”€ portraits/   â”‚       â”‚ â€¢ Buckets            â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ â”œâ”€â”€ videos/      â”‚       â”‚ â€¢ Upload/Download    â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ â”œâ”€â”€ markers/     â”‚       â”‚ â€¢ Multipart support  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ â”œâ”€â”€ qrcodes/     â”‚       â”‚ â€¢ Versioning         â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ â””â”€â”€ thumbnails/  â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚  â”‚                  â”‚                                  â”‚   â”‚
â”‚  â”‚  â”‚ Features:        â”‚       Environment-based:        â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ File I/O       â”‚       â€¢ STORAGE_TYPE=local      â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Directory ops  â”‚       â€¢ STORAGE_TYPE=minio      â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Disk usage     â”‚       â€¢ Config via .env         â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ File cleanup   â”‚                                  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚   â”‚
â”‚  â”‚                                                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ ĞŸĞ¾Ñ‚Ğ¾Ğº Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Client    â”‚ (Browser, Mobile App, AR Viewer)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ HTTP/HTTPS Request
       â”‚ {method, endpoint, headers, body}
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Nginx Reverse Proxy       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Rate Limiting             â”‚
â”‚ â€¢ SSL/TLS Termination       â”‚
â”‚ â€¢ Request Routing           â”‚
â”‚ â€¢ Compression               â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Internal Request
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FastAPI Application              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ CORS Middleware                    â”‚ â—„â”€ Check origin
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”˜
       â”‚                           â”‚
       â–¼                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚ RequestLoggingMiddleware   â”‚     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚ â€¢ Generate request ID      â”‚     â”‚
â”‚ â€¢ Log request info         â”‚     â”‚
â”‚ â€¢ Extract client IP        â”‚     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”˜     â”‚
       â”‚                   â”‚       â”‚
       â–¼                   â”‚       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ Auth Middleware                â”‚ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â€¢ Validate JWT token           â”‚ â”‚
â”‚ â€¢ Extract user context         â”‚ â”‚
â”‚ â€¢ Check permissions            â”‚ â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”˜
       â”‚                       â”‚
       â–¼                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Rate Limiter                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Global limit (100/min)       â”‚
â”‚ â€¢ Auth limit (5/min)           â”‚
â”‚ â€¢ Upload limit (10/min)        â”‚
â”‚ â€¢ Per-user limit               â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Route Handler / Endpoint       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Validate request data        â”‚
â”‚ â€¢ Check business logic         â”‚
â”‚ â€¢ Query database               â”‚
â”‚ â€¢ Handle storage operations    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”˜
       â”‚                       â”‚
       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Database     â”‚     â”‚   File System  â”‚
â”‚   (SQLite)     â”‚     â”‚   or MinIO     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                       â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Response Object                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Status code                  â”‚
â”‚ â€¢ Headers                      â”‚
â”‚ â€¢ Body (JSON/HTML/File)        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ErrorLoggingMiddleware         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Log errors and exceptions    â”‚
â”‚ â€¢ Add error context            â”‚
â”‚ â€¢ Track error metrics          â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Response Sent to Client        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ HTTP/2, Compression, Headers   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Data Models (Entities)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         User               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ id: UUID                 â”‚
â”‚ â€¢ username: str (unique)   â”‚
â”‚ â€¢ email: str (unique)      â”‚
â”‚ â€¢ password_hash: str       â”‚
â”‚ â€¢ full_name: str           â”‚
â”‚ â€¢ role: enum [admin, user] â”‚
â”‚ â€¢ is_active: bool          â”‚
â”‚ â€¢ is_locked: bool          â”‚
â”‚ â€¢ created_at: datetime     â”‚
â”‚ â€¢ updated_at: datetime     â”‚
â”‚ â€¢ last_login: datetime     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ 1:N
                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                     â”‚
        â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Client       â”‚  â”‚  Notification    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ id: UUID       â”‚  â”‚ â€¢ id: UUID       â”‚
â”‚ â€¢ phone: str     â”‚  â”‚ â€¢ user_id: FK    â”‚
â”‚ â€¢ name: str      â”‚  â”‚ â€¢ type: str      â”‚
â”‚ â€¢ created_at     â”‚  â”‚ â€¢ message: str   â”‚
â”‚ â€¢ updated_at     â”‚  â”‚ â€¢ is_read: bool  â”‚
â”‚                  â”‚  â”‚ â€¢ created_at     â”‚
â”‚                  â”‚  â”‚ â€¢ read_at        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 1:N
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Portrait            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ id: UUID               â”‚
â”‚ â€¢ client_id: FK          â”‚
â”‚ â€¢ image_path: str        â”‚
â”‚ â€¢ image_size: int        â”‚
â”‚ â€¢ preview_path: str      â”‚
â”‚ â€¢ marker_path: str       â”‚
â”‚ â€¢ marker_preview: str    â”‚
â”‚ â€¢ status: enum           â”‚
â”‚ â€¢ created_at: datetime   â”‚
â”‚ â€¢ updated_at: datetime   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ 1:N
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Video              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ id: UUID               â”‚
â”‚ â€¢ portrait_id: FK        â”‚
â”‚ â€¢ video_path: str        â”‚
â”‚ â€¢ duration: float        â”‚
â”‚ â€¢ is_active: bool        â”‚
â”‚ â€¢ uploaded_at: datetime  â”‚
â”‚ â€¢ updated_at: datetime   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Order              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ id: UUID               â”‚
â”‚ â€¢ client_id: FK          â”‚
â”‚ â€¢ status: enum           â”‚
â”‚ â€¢ notes: str             â”‚
â”‚ â€¢ created_at: datetime   â”‚
â”‚ â€¢ updated_at: datetime   â”‚
â”‚ â€¢ completed_at: datetime â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Authentication & Security Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         AUTH FLOW                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  User Input (username + password)      â”‚
â”‚          â”‚                              â”‚
â”‚          â–¼                              â”‚
â”‚  Validate Format                        â”‚
â”‚  â”œâ”€ Username not empty                  â”‚
â”‚  â””â”€ Password meets policy               â”‚
â”‚          â”‚                              â”‚
â”‚          â–¼                              â”‚
â”‚  Query User from DB                     â”‚
â”‚          â”‚                              â”‚
â”‚       â”Œâ”€â”€â”´â”€â”€â”                           â”‚
â”‚       â”‚     â”‚                           â”‚
â”‚   âœ—   â”‚     â”‚   âœ“                       â”‚
â”‚    \  â”‚     â”‚  /                        â”‚
â”‚     \ â”‚     â”‚ /                         â”‚
â”‚      \â”‚     â”‚/                          â”‚
â”‚   Error   Success                       â”‚
â”‚       â”‚     â”‚                           â”‚
â”‚       â”‚     â–¼                           â”‚
â”‚       â”‚ Check if locked                 â”‚
â”‚       â”‚ (failed attempts > 5)           â”‚
â”‚       â”‚     â”‚                           â”‚
â”‚       â”‚  â”Œâ”€â”€â”´â”€â”€â”                       â”‚
â”‚       â”‚  â”‚     â”‚                        â”‚
â”‚       â”‚âœ— â”‚     â”‚ âœ“                     â”‚
â”‚       â”‚  â”‚     â”‚                        â”‚
â”‚       â–¼  â”‚     â–¼                        â”‚
â”‚     Error Check Password                â”‚
â”‚       â”‚  â””â”€â”€â”¬â”€â”€â”                       â”‚
â”‚       â”‚     â”‚  â”‚                        â”‚
â”‚       â”‚  âœ—  â”‚  â”‚  âœ“                    â”‚
â”‚       â”‚  \  â”‚  /                       â”‚
â”‚       â”‚   \ â”‚ /                        â”‚
â”‚       â”‚    \â”‚/                         â”‚
â”‚       â”‚  Error Success                  â”‚
â”‚       â”‚   â”‚   â”‚                         â”‚
â”‚       â”‚   â”‚   â–¼                         â”‚
â”‚       â”‚   â”‚ Generate JWT               â”‚
â”‚       â”‚   â”‚ â”œâ”€ Header (alg, typ)       â”‚
â”‚       â”‚   â”‚ â”œâ”€ Payload (user, exp)     â”‚
â”‚       â”‚   â”‚ â””â”€ Signature (HMAC)        â”‚
â”‚       â”‚   â”‚   â”‚                         â”‚
â”‚       â”‚   â”‚   â–¼                         â”‚
â”‚       â”‚   â”‚ Return Token               â”‚
â”‚       â”‚   â”‚ & Refresh Token            â”‚
â”‚       â”‚   â”‚                             â”‚
â”‚       â””â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                         â”‚
â”‚         PROTECTED ENDPOINT              â”‚
â”‚          (Every Request)                â”‚
â”‚                                         â”‚
â”‚  Client sends: Authorization: Bearer <token>
â”‚          â”‚                              â”‚
â”‚          â–¼                              â”‚
â”‚  Extract token from header              â”‚
â”‚          â”‚                              â”‚
â”‚          â–¼                              â”‚
â”‚  Validate signature (HMAC)              â”‚
â”‚  â”œâ”€ Check secret key                    â”‚
â”‚  â””â”€ Verify not tampered                 â”‚
â”‚          â”‚                              â”‚
â”‚       â”Œâ”€â”€â”´â”€â”€â”                           â”‚
â”‚       â”‚     â”‚                           â”‚
â”‚   âœ—   â”‚     â”‚   âœ“                       â”‚
â”‚   401  â”‚     â”‚ Valid                    â”‚
â”‚     \  â”‚     â”‚  /                       â”‚
â”‚      \ â”‚     â”‚ /                        â”‚
â”‚       \â”‚     â”‚/                         â”‚
â”‚      Reject Success                     â”‚
â”‚       â”‚     â”‚                           â”‚
â”‚       â”‚     â–¼                           â”‚
â”‚       â”‚ Extract user info               â”‚
â”‚       â”‚ â”œâ”€ user_id                      â”‚
â”‚       â”‚ â”œâ”€ role                         â”‚
â”‚       â”‚ â””â”€ permissions                  â”‚
â”‚       â”‚     â”‚                           â”‚
â”‚       â”‚     â–¼                           â”‚
â”‚       â”‚ Check expiration                â”‚
â”‚       â”‚ (JWT exp claim)                 â”‚
â”‚       â”‚     â”‚                           â”‚
â”‚       â”‚  â”Œâ”€â”€â”´â”€â”€â”                       â”‚
â”‚       â”‚  â”‚     â”‚                        â”‚
â”‚   âœ—   â”‚  â”‚     â”‚ âœ“                     â”‚
â”‚  Expiredâ”‚ â”‚     â”‚ Valid                 â”‚
â”‚   \    â”‚  â”‚     â”‚  /                    â”‚
â”‚    \   â”‚  â”‚     â”‚ /                     â”‚
â”‚     \  â”‚  â”‚     â”‚/                      â”‚
â”‚     Error  Proceed                      â”‚
â”‚       â”‚    â”‚                            â”‚
â”‚       â””â”€â”€â”€ â–¼                            â”‚
â”‚         Call route handler              â”‚
â”‚         with user context               â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Project Directory Tree (Simplified)

```
vertex-ar/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py ............................ FastAPI app factory
â”‚   â”œâ”€â”€ config.py .......................... Settings management
â”‚   â”œâ”€â”€ database.py ........................ SQLAlchemy setup
â”‚   â”œâ”€â”€ models.py .......................... Pydantic models
â”‚   â”œâ”€â”€ auth.py ............................ JWT auth utilities
â”‚   â”œâ”€â”€ middleware.py ...................... Custom middleware
â”‚   â”œâ”€â”€ validators.py ...................... Data validators
â”‚   â”œâ”€â”€ storage.py ......................... Storage interface
â”‚   â”œâ”€â”€ storage_local.py ................... Local filesystem
â”‚   â”œâ”€â”€ storage_minio.py ................... MinIO/S3 adapter
â”‚   â”œâ”€â”€ rate_limiter.py .................... Rate limiting
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ auth.py ........................ /auth endpoints
â”‚   â”‚   â”œâ”€â”€ users.py ....................... /users endpoints
â”‚   â”‚   â”œâ”€â”€ clients.py ..................... /clients endpoints
â”‚   â”‚   â”œâ”€â”€ portraits.py ................... /portraits endpoints (UPDATED â­)
â”‚   â”‚   â”œâ”€â”€ videos.py ...................... /videos endpoints
â”‚   â”‚   â”œâ”€â”€ orders.py ...................... /orders endpoints
â”‚   â”‚   â”œâ”€â”€ ar.py .......................... /ar endpoints
â”‚   â”‚   â”œâ”€â”€ admin.py ....................... /admin endpoints (UPDATED â­)
â”‚   â”‚   â”œâ”€â”€ notifications.py ............... /notifications endpoints
â”‚   â”‚   â””â”€â”€ health.py ...................... /health endpoints
â”‚   â””â”€â”€ [Other modules]
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ login.html ......................... Login page
â”‚   â”œâ”€â”€ admin.html ......................... Admin dashboard (main)
â”‚   â”œâ”€â”€ admin_orders.html .................. Orders dashboard (NEW â­)
â”‚   â”œâ”€â”€ ar_page.html ....................... AR viewer
â”‚   â”œâ”€â”€ ar_page_enhanced.html ............. Enhanced AR viewer
â”‚   â””â”€â”€ ar_portrait_animation.html ........ AR with animation
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ test_api.py ........................ API tests
â”‚   â”œâ”€â”€ test_auth.py ....................... Auth tests
â”‚   â”œâ”€â”€ test_database.py ................... DB tests
â”‚   â”œâ”€â”€ test_storage.py .................... Storage tests
â”‚   â”œâ”€â”€ test_user_management.py ........... User tests
â”‚   â””â”€â”€ [Other tests]
â”œâ”€â”€ main.py ............................... Entry point
â”œâ”€â”€ start.sh .............................. Start script
â”œâ”€â”€ requirements.txt ....................... Dependencies
â””â”€â”€ [Configuration and doc files]

docs/
â”œâ”€â”€ README.md ............................. Docs index
â”œâ”€â”€ API_REFERENCE.md ...................... API docs
â”œâ”€â”€ DEPLOYMENT.md ......................... Deploy guide
â””â”€â”€ [Other documentation]

â”œâ”€â”€ docker-compose.yml .................... Main compose
â”œâ”€â”€ docker-compose.minio-remote.yml ...... MinIO compose
â”œâ”€â”€ Dockerfile.app ........................ App image
â”œâ”€â”€ nginx.conf ............................ Nginx config
â”œâ”€â”€ .gitignore ............................ Git ignore (407 lines)
â”œâ”€â”€ pytest.ini ............................ Pytest config
â”œâ”€â”€ pyproject.toml ........................ Project metadata
â”œâ”€â”€ README.md ............................. Main README
â””â”€â”€ [25+ documentation files]
```

---

## ğŸ”§ Technology Stack

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      BACKEND FRAMEWORK          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ FastAPI 0.104.1               â”‚
â”‚ â€¢ Uvicorn 0.24.0 (ASGI server)  â”‚
â”‚ â€¢ Python 3.9+                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      DATABASE                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ SQLAlchemy 2.0.23 (ORM)       â”‚
â”‚ â€¢ SQLite (dev/prod) / PostgreSQLâ”‚
â”‚ â€¢ Alembic (migrations)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      AUTHENTICATION             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ python-jose 3.3.0 (JWT)       â”‚
â”‚ â€¢ passlib 1.7.4 (password hash) â”‚
â”‚ â€¢ bcrypt (secure hashing)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      FILE HANDLING              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Pillow 10.1.0 (images)        â”‚
â”‚ â€¢ OpenCV 4.8.1.78 (video)       â”‚
â”‚ â€¢ MinIO 7.2.0 (S3-compat)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ aiofiles 23.2.1 (async I/O)   â”‚
â”‚ â€¢ python-multipart 0.0.6        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      DATA VALIDATION            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Pydantic 2.5.0                â”‚
â”‚ â€¢ pydantic-settings 2.1.0       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      INFRASTRUCTURE             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Docker / Docker Compose       â”‚
â”‚ â€¢ Nginx (reverse proxy)         â”‚
â”‚ â€¢ Supervisor (process mgmt)     â”‚
â”‚ â€¢ uWSGI / Gunicorn              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      MONITORING                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Prometheus (metrics)          â”‚
â”‚ â€¢ Sentry (error tracking)       â”‚
â”‚ â€¢ prometheus-fastapi-instrumentator
â”‚ â€¢ Structured JSON logging       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      TESTING                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ pytest 7.4.3                  â”‚
â”‚ â€¢ pytest-cov 4.1.0              â”‚
â”‚ â€¢ pytest-asyncio 0.21.1         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      CODE QUALITY               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ black 23.12.0 (formatter)     â”‚
â”‚ â€¢ flake8 6.1.0 (linter)         â”‚
â”‚ â€¢ mypy 1.7.1 (type checker)     â”‚
â”‚ â€¢ pre-commit (git hooks)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Key Design Patterns

```
1. ADAPTER PATTERN (Storage)
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ StorageAdapter      â”‚ (Abstract interface)
   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
       â”Œâ”€â”€â”´â”€â”€â”
       â”‚     â”‚
       â–¼     â–¼
   LocalFS  MinIO/S3  (Concrete implementations)

2. MIDDLEWARE PATTERN (Request Processing)
   Request â”€â”€â–º Middleware1 â”€â”€â–º Middleware2 â”€â”€â–º Middleware3 â”€â”€â–º Handler
                (CORS)         (Logging)       (Error)

3. DEPENDENCY INJECTION (FastAPI)
   Route Handler(db: Database, auth: Auth, ...) â† Injected

4. FACTORY PATTERN (App Creation)
   create_app() â”€â”€â–º FastAPI instance with all dependencies

5. DAO PATTERN (Data Access)
   User â”€â”€â–º UserRepository â”€â”€â–º Database

6. SINGLETON PATTERN (App Instance)
   get_current_app() â”€â”€â–º Global _app_instance

7. STRATEGY PATTERN (Authentication)
   JWTStrategy, OAuthStrategy, etc.

8. CHAIN OF RESPONSIBILITY (Error Handling)
   Handler1 â”€â”€Xâ”€â”€â–º Handler2 â”€â”€Xâ”€â”€â–º Handler3 â”€â”€âœ“
```

---

## ğŸ“Š Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           PRODUCTION ENVIRONMENT                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Client Tier                                 â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ â€¢ Web Browsers (Admin)                       â”‚  â”‚
â”‚  â”‚ â€¢ Mobile Apps                                â”‚  â”‚
â”‚  â”‚ â€¢ AR Viewers                                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚               â”‚ HTTPS                              â”‚
â”‚               â–¼                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  CDN / Load Balancer (Optional)              â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ â€¢ CloudFront / Cloudflare                    â”‚  â”‚
â”‚  â”‚ â€¢ Geographic routing                         â”‚  â”‚
â”‚  â”‚ â€¢ Cache optimization                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚               â”‚                                     â”‚
â”‚               â–¼                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Nginx (Reverse Proxy)                       â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ â€¢ SSL/TLS termination                        â”‚  â”‚
â”‚  â”‚ â€¢ Rate limiting                              â”‚  â”‚
â”‚  â”‚ â€¢ Load balancing                             â”‚  â”‚
â”‚  â”‚ â€¢ Compression                                â”‚  â”‚
â”‚  â”‚ â€¢ Static file serving                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”˜  â”‚
â”‚       â”‚                                         â”‚   â”‚
â”‚       â–¼                                         â–¼   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Application Tier 1  â”‚         â”‚ Application 2 â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚ â€¢ FastAPI + Uvicorn â”‚ â”€â”€â”€â”€â”   â”‚ FastAPI +      â”‚â”‚
â”‚  â”‚ â€¢ Port 8001        â”‚     â”‚   â”‚ Uvicorn       â”‚â”‚
â”‚  â”‚ â€¢ Python 3.9+      â”‚     â”‚   â”‚ â€¢ Port 8002    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”˜
â”‚       â”‚                      â”‚        â”‚          â”‚  
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚  
â”‚                  â”‚ Internal LB                   â”‚  
â”‚                  â–¼                               â”‚  
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Database Tier                               â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ â€¢ PostgreSQL (primary)                       â”‚  â”‚
â”‚  â”‚ â€¢ Replication (standby)                      â”‚  â”‚
â”‚  â”‚ â€¢ Backups (automated)                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Storage Tier                                â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ â€¢ MinIO / S3 (object storage)                â”‚  â”‚
â”‚  â”‚ â€¢ Backups (versioning)                       â”‚  â”‚
â”‚  â”‚ â€¢ Lifecycle policies                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Monitoring & Logging                        â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ â€¢ Prometheus (metrics)                       â”‚  â”‚
â”‚  â”‚ â€¢ ELK Stack (logs)                           â”‚  â”‚
â”‚  â”‚ â€¢ Sentry (error tracking)                    â”‚  â”‚
â”‚  â”‚ â€¢ Datadog / NewRelic (APM)                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Background Tasks                            â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ â€¢ Celery (task queue)                        â”‚  â”‚
â”‚  â”‚ â€¢ Redis (message broker)                     â”‚  â”‚
â”‚  â”‚ â€¢ Workers (processing)                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ˆ Scaling Considerations

```
Vertical Scaling (Single server)
â”œâ”€ More CPU cores
â”œâ”€ More RAM (caching)
â”œâ”€ Faster storage (SSD)
â””â”€ Limits: Single point of failure

Horizontal Scaling (Multiple servers)
â”œâ”€ Load balancer (Nginx, HAProxy)
â”œâ”€ Multiple app instances
â”œâ”€ Shared database (PostgreSQL)
â”œâ”€ Shared storage (S3, MinIO)
â””â”€ Session store (Redis)

Database Scaling
â”œâ”€ Replication (Read replicas)
â”œâ”€ Sharding (Horizontal partitioning)
â”œâ”€ Caching (Redis, Memcached)
â””â”€ Read/Write separation

Storage Scaling
â”œâ”€ CDN for static assets
â”œâ”€ S3 versioning
â”œâ”€ Lifecycle policies
â””â”€ Multi-region replication
```

---

**Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½:** âœ… Ğ£Ğ¡ĞŸĞ•Ğ¨ĞĞ

ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Vertex AR Ñ…Ğ¾Ñ€Ğ¾ÑˆĞ¾ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ° Ğ¸ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ° Ğº Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ.
