# üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

–î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π —Å–∏—Å—Ç–µ–º—ã —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è.

## ‚úÖ –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ
- –í—ã –≤–æ—à–ª–∏ –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–¥–µ—Ä–∂–∏—Ç —Ö–æ—Ç—è –±—ã –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π

## üìù –¢–µ—Å—Ç 1: –£–¥–∞–ª–µ–Ω–∏–µ Database Backup

### –¶–µ–ª—å
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ database backup —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ UI.

### –®–∞–≥–∏
1. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `/admin/backups`
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "üíæ Database Backup"
3. –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–∑–¥–∞–Ω–∏—è –±—ç–∫–∞–ø–∞ (–ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –ø–æ–∫–∞–∂–µ—Ç 100%)
4. –í —Å–ø–∏—Å–∫–µ –±—ç–∫–∞–ø–æ–≤ –Ω–∞–π–¥–∏—Ç–µ —Ç–æ–ª—å–∫–æ —á—Ç–æ —Å–æ–∑–¥–∞–Ω–Ω—ã–π backup
5. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É üóëÔ∏è —Ä—è–¥–æ–º —Å –Ω–∏–º
6. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —É–¥–∞–ª–µ–Ω–∏–µ –≤ –¥–∏–∞–ª–æ–≥–æ–≤–æ–º –æ–∫–Ω–µ
7. –ë—ç–∫–∞–ø –¥–æ–ª–∂–µ–Ω –∏—Å—á–µ–∑–Ω—É—Ç—å –∏–∑ —Å–ø–∏—Å–∫–∞

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ –ë—ç–∫–∞–ø —Å–æ–∑–¥–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ "‚úì –ë—ç–∫–∞–ø —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω"
- ‚úÖ –ë—ç–∫–∞–ø —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ —Å–ø–∏—Å–∫–∞
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ database backups —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è)

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ
```bash
ls -la backups/database/
# –§–∞–π–ª–æ–≤ –¥–æ–ª–∂–Ω–æ —Å—Ç–∞—Ç—å –º–µ–Ω—å—à–µ
```

---

## üìù –¢–µ—Å—Ç 2: –£–¥–∞–ª–µ–Ω–∏–µ Full Backup

### –¶–µ–ª—å
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ full backup (database + storage) —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª—è–µ—Ç—Å—è.

### –®–∞–≥–∏
1. –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/admin/backups` –Ω–∞–∂–º–∏—Ç–µ "üîÑ Full Backup"
2. –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–∑–¥–∞–Ω–∏—è (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏)
3. –ù–∞–π–¥–∏—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π full backup –≤ —Å–ø–∏—Å–∫–µ
4. –ù–∞–∂–º–∏—Ç–µ üóëÔ∏è
5. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —É–¥–∞–ª–µ–Ω–∏–µ

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ Full backup —Å–æ–∑–¥–∞–µ—Ç—Å—è (–æ–±–∞ —Ñ–∞–π–ª–∞: database –∏ storage)
- ‚úÖ –£–¥–∞–ª—è—é—Ç—Å—è –æ–±–∞ —Ñ–∞–π–ª–∞ —Å—Ä–∞–∑—É
- ‚úÖ –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (.json —Ñ–∞–π–ª—ã) —Ç–∞–∫–∂–µ —É–¥–∞–ª—è—é—Ç—Å—è
- ‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ: "Deleted 2 backup file(s)" –∏–ª–∏ –ø–æ–¥–æ–±–Ω–æ–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å database backups
ls -la backups/database/ | grep $(date +%Y%m%d)

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å storage backups
ls -la backups/storage/ | grep $(date +%Y%m%d)

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å full backup metadata
ls -la backups/full/ | grep $(date +%Y%m%d)
```

**–≠—Ç–æ –±—ã–ª –≥–ª–∞–≤–Ω—ã–π –±–∞–≥!** –†–∞–Ω—å—à–µ full backups –Ω–µ —É–¥–∞–ª—è–ª–∏—Å—å, —Ç–µ–ø–µ—Ä—å –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å.

---

## üìù –¢–µ—Å—Ç 3: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ Database Backup

### ‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï
–≠—Ç–æ—Ç —Ç–µ—Å—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—à–µ—Ç —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ! –í—ã–ø–æ–ª–Ω—è–π—Ç–µ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ –∏–ª–∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –µ—Å—Ç—å —Å–≤–µ–∂–∏–π –±—ç–∫–∞–ø.

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞
```bash
# –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é —Ç–∞–±–ª–∏—Ü—É –∏–ª–∏ –∑–∞–ø–∏—Å—å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
sqlite3 app_data.db "SELECT COUNT(*) FROM clients;"
# –ó–∞–ø–æ–º–Ω–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
```

### –®–∞–≥–∏
1. –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/admin/backups` —Å–æ–∑–¥–∞–π—Ç–µ database backup
2. –î–æ–±–∞–≤—å—Ç–µ –∏–ª–∏ —É–¥–∞–ª–∏—Ç–µ –∫–∞–∫—É—é-—Ç–æ –∑–∞–ø–∏—Å—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
3. –ù–∞–π–¥–∏—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Ä–∞–Ω–µ–µ backup –≤ —Å–ø–∏—Å–∫–µ
4. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É ‚ôªÔ∏è (–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å)
5. –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ
6. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –¥–≤–∞–∂–¥—ã (–¥–≤–æ–π–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
7. –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–æ–±—â–µ–Ω–∏—è "‚úì –£—Å–ø–µ—à–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∏–∑ –±—ç–∫–∞–ø–∞"
8. –ù–∞–∂–º–∏—Ç–µ "OK" –Ω–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
9. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—Å—è

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ —Å –¥–µ—Ç–∞–ª—è–º–∏
- ‚úÖ –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–≤–æ–π–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π backup —Ç–µ–∫—É—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö (—Å —Å—É—Ñ—Ñ–∏–∫—Å–æ–º `.before_restore_`)
- ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –î–∞–Ω–Ω—ã–µ –æ—Ç–∫–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫ —Å–æ—Å—Ç–æ—è–Ω–∏—é –Ω–∞ –º–æ–º–µ–Ω—Ç –±—ç–∫–∞–ø–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å–æ–∑–¥–∞–Ω backup –ø–µ—Ä–µ–¥ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º
ls -la backups/ | grep before_restore

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π
sqlite3 app_data.db "SELECT COUNT(*) FROM clients;"
# –î–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –¥–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π
```

---

## üìù –¢–µ—Å—Ç 4: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –±—ç–∫–∞–ø–æ–≤

### –¶–µ–ª—å
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

### –®–∞–≥–∏
1. –û—Ç–∫—Ä–æ–π—Ç–µ `/admin/backups`
2. –ù–∞–π–¥–∏—Ç–µ —Å–µ–∫—Ü–∏—é "ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ"
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å: "‚úì –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç" (–∑–µ–ª–µ–Ω—ã–º)
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –±—ç–∫–∞–ø–∞:
  - Database: `0 2 * * *` (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 2:00)
  - Full: `0 3 * * 0` (–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ –≤ 3:00)
  - Rotation: `0 4 * * *` (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 4:00)
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤—Ä–µ–º—è —Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–ø—É—Å–∫–æ–≤
- ‚úÖ –°–µ–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥

### –ï—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
journalctl -u vertex-ar | grep "backup scheduler"

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# "Automated backup scheduler started"
# "Scheduled database backup"
```

---

## üìù –¢–µ—Å—Ç 5: API endpoint –¥–ª—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

### –¶–µ–ª—å
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –Ω–æ–≤–æ–≥–æ API endpoint.

### –®–∞–≥–∏
```bash
# –ü–æ–ª—É—á–∏—Ç–µ session cookie –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ curl —Å credentials

# –í–∞—Ä–∏–∞–Ω—Ç 1: —á–µ—Ä–µ–∑ curl (–µ—Å–ª–∏ –µ—Å—Ç—å session)
curl -X GET http://localhost:8000/backups/schedule \
  -H "Cookie: session=YOUR_SESSION_TOKEN" \
  -s | jq .

# –í–∞—Ä–∏–∞–Ω—Ç 2: —á–µ—Ä–µ–∑ Python
python3 << EOF
import requests

# Login first
session = requests.Session()
login_data = {
    "username": "superar",
    "password": "ffE48f0ns@HQ"
}
session.post("http://localhost:8000/auth/login", json=login_data)

# Get schedule
response = session.get("http://localhost:8000/backups/schedule")
print(response.json())
EOF
```

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
```json
{
  "success": true,
  "scheduler_running": true,
  "jobs": {
    "database_backup": {
      "name": "Database Backup",
      "next_run": "2025-01-21T02:00:00"
    },
    "full_backup": {
      "name": "Full Backup",
      "next_run": "2025-01-26T03:00:00"
    },
    ...
  },
  "schedules": {
    "database": "0 2 * * *",
    "storage": "disabled",
    "full": "0 3 * * 0",
    "rotation": "0 4 * * *"
  }
}
```

---

## üìù –¢–µ—Å—Ç 6: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞ (simulation)

### –¶–µ–ª—å
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø.

### –®–∞–≥–∏
```bash
# –í–∞—Ä–∏–∞–Ω—Ç 1: –ò–∑–º–µ–Ω–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env:
BACKUP_DATABASE_SCHEDULE=* * * * *  # –ö–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
sudo systemctl restart vertex-ar

# –ü–æ–¥–æ–∂–¥–∏—Ç–µ 1-2 –º–∏–Ω—É—Ç—ã –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
journalctl -u vertex-ar -f | grep -i backup

# –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è —Å—Ç—Ä–æ–∫–∏:
# "Starting scheduled database backup"
# "Scheduled database backup completed"

# –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–æ–π —Ç—Ä–∏–≥–≥–µ—Ä —á–µ—Ä–µ–∑ Python
python3 << EOF
from backup_scheduler import get_backup_scheduler

scheduler = get_backup_scheduler()
scheduler.trigger_backup("database")
print("Manual trigger completed")
EOF
```

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ –ë—ç–∫–∞–ø —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
- ‚úÖ –í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Å–æ–∑–¥–∞–Ω–∏–∏
- ‚úÖ –§–∞–π–ª –±—ç–∫–∞–ø–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ `backups/database/`
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ UI –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
```bash
# –í–µ—Ä–Ω–∏—Ç–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≤ .env
BACKUP_DATABASE_SCHEDULE=0 2 * * *

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ
sudo systemctl restart vertex-ar
```

---

## üìù –¢–µ—Å—Ç 7: –†–æ—Ç–∞—Ü–∏—è –±—ç–∫–∞–ø–æ–≤

### –¶–µ–ª—å
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –±—ç–∫–∞–ø–æ–≤.

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞
```bash
# –°–æ–∑–¥–∞–π—Ç–µ 10+ —Ç–µ—Å—Ç–æ–≤—ã—Ö –±—ç–∫–∞–ø–æ–≤
for i in {1..10}; do
  python backup_cli.py create database
  sleep 2
done

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
ls -la backups/database/ | wc -l
```

### –®–∞–≥–∏ —á–µ—Ä–µ–∑ UI
1. –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/admin/backups` –Ω–∞–∂–º–∏—Ç–µ "üóëÔ∏è Clean Old"
2. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –≤ –¥–∏–∞–ª–æ–≥–µ
3. –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± —É—Å–ø–µ—Ö–µ

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ –£–¥–∞–ª—è—é—Ç—Å—è —Å—Ç–∞—Ä—ã–µ –±—ç–∫–∞–ø—ã
- ‚úÖ –û—Å—Ç–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ 7 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö (–∏–ª–∏ MAX_BACKUPS –∏–∑ .env)
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö: "‚úì –£–¥–∞–ª–µ–Ω–æ X —Å—Ç–∞—Ä—ã—Ö –±—ç–∫–∞–ø–æ–≤"

### –ü—Ä–æ–≤–µ—Ä–∫–∞
```bash
# –î–æ–ª–∂–Ω–æ –æ—Å—Ç–∞—Ç—å—Å—è –Ω–µ –±–æ–ª—å—à–µ 7 —Ñ–∞–π–ª–æ–≤ (+ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ)
ls -la backups/database/ | grep "\.db$" | wc -l
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å ‚â§ 7
```

---

## üìù –¢–µ—Å—Ç 8: –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –¶–µ–ª—å
–£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –Ω–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª—ã –≤–Ω–µ backup directory.

### –®–∞–≥–∏
```bash
# –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —É–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª –≤–Ω–µ backup directory —á–µ—Ä–µ–∑ API
curl -X DELETE "http://localhost:8000/backups/delete?backup_path=/etc/passwd" \
  -H "Cookie: session=YOUR_SESSION" \
  -v
```

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ –û—à–∏–±–∫–∞ 403: "Access denied: backup must be within backup directory"
- ‚úÖ –§–∞–π–ª `/etc/passwd` –ù–ï —É–¥–∞–ª–µ–Ω
- ‚úÖ –í –ª–æ–≥–∞—Ö –µ—Å—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –ø–æ–ø—ã—Ç–∫–µ

---

## üìù –¢–µ—Å—Ç 9: –ö–Ω–æ–ø–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–ª—è full backup

### –¶–µ–ª—å
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ full backup –Ω–µ –∏–º–µ–µ—Ç –∫–Ω–æ–ø–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è (—Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–≥–æ).

### –®–∞–≥–∏
1. –°–æ–∑–¥–∞–π—Ç–µ full backup
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –Ω–µ–≥–æ –≤ —Å–ø–∏—Å–∫–µ

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ –£ full backup –ù–ï–¢ –∫–Ω–æ–ø–∫–∏ ‚ôªÔ∏è
- ‚úÖ –ï—Å—Ç—å —Ç–æ–ª—å–∫–æ –∫–Ω–æ–ø–∫–∞ üóëÔ∏è
- ‚úÖ –î–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è full backup –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CLI (—Å–º. BACKUP_RESTORE_GUIDE.md)

---

## üìù –¢–µ—Å—Ç 10: –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

### –¶–µ–ª—å
–£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –∏ —É–¥–∞–ª—è—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

### –®–∞–≥–∏
```bash
# –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø
python backup_cli.py create database

# –ù–∞–π—Ç–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π –±—ç–∫–∞–ø
BACKUP_FILE=$(ls -t backups/database/db_backup_*.db | head -n 1)
METADATA_FILE="${BACKUP_FILE%.db}.json"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç
cat "$METADATA_FILE" | jq .

# –£–¥–∞–ª–∏—Ç—å —á–µ—Ä–µ–∑ UI
# –ë—ç–∫–∞–ø –¥–æ–ª–∂–µ–Ω —É–¥–∞–ª–∏—Ç—å—Å—è –≤–º–µ—Å—Ç–µ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –æ–±–∞ —Ñ–∞–π–ª–∞ —É–¥–∞–ª–µ–Ω—ã
ls -la "$BACKUP_FILE" "$METADATA_FILE"
# –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞ "No such file"
```

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ .json —Ñ–∞–π–ª —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å –±—ç–∫–∞–ø–æ–º
- ‚úÖ –°–æ–¥–µ—Ä–∂–∏—Ç checksum, —Ä–∞–∑–º–µ—Ä, timestamp
- ‚úÖ –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –±—ç–∫–∞–ø–∞ —É–¥–∞–ª—è–µ—Ç—Å—è –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ

---

## üéØ –ß–µ–∫-–ª–∏—Å—Ç –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤

- [ ] –¢–µ—Å—Ç 1: –£–¥–∞–ª–µ–Ω–∏–µ Database Backup
- [ ] –¢–µ—Å—Ç 2: –£–¥–∞–ª–µ–Ω–∏–µ Full Backup (–æ—Å–Ω–æ–≤–Ω–æ–π –±–∞–≥)
- [ ] –¢–µ—Å—Ç 3: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ Database
- [ ] –¢–µ—Å—Ç 4: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
- [ ] –¢–µ—Å—Ç 5: API endpoint —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
- [ ] –¢–µ—Å—Ç 6: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞
- [ ] –¢–µ—Å—Ç 7: –†–æ—Ç–∞—Ü–∏—è –±—ç–∫–∞–ø–æ–≤
- [ ] –¢–µ—Å—Ç 8: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–∑–∞—â–∏—Ç–∞ –æ—Ç path traversal)
- [ ] –¢–µ—Å—Ç 9: Full backup –±–µ–∑ –∫–Ω–æ–ø–∫–∏ restore
- [ ] –¢–µ—Å—Ç 10: –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –∏ —É–¥–∞–ª—è—é—Ç—Å—è

## üìä –û—Ç—á–µ—Ç –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

–ü–æ—Å–ª–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ:

```
–î–∞—Ç–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: _____________
–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫: ___________________
–í–µ—Ä—Å–∏—è –ü–û: ____________________
–û–∫—Ä—É–∂–µ–Ω–∏–µ: ____________________

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:
- –¢–µ—Å—Ç 1: ‚òê Pass ‚òê Fail
- –¢–µ—Å—Ç 2: ‚òê Pass ‚òê Fail
- –¢–µ—Å—Ç 3: ‚òê Pass ‚òê Fail
- –¢–µ—Å—Ç 4: ‚òê Pass ‚òê Fail
- –¢–µ—Å—Ç 5: ‚òê Pass ‚òê Fail
- –¢–µ—Å—Ç 6: ‚òê Pass ‚òê Fail
- –¢–µ—Å—Ç 7: ‚òê Pass ‚òê Fail
- –¢–µ—Å—Ç 8: ‚òê Pass ‚òê Fail
- –¢–µ—Å—Ç 9: ‚òê Pass ‚òê Fail
- –¢–µ—Å—Ç 10: ‚òê Pass ‚òê Fail

–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:
_____________________________________
_____________________________________
_____________________________________
```

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **Full backup restore** —Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ CLI
2. **Storage restore** –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –±–æ–ª—å—à–∏—Ö –∞—Ä—Ö–∏–≤–æ–≤
3. **–ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Å—É–º–º—ã** –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ

---

**–í–µ—Ä—Å–∏—è —Ç–µ—Å—Ç–æ–≤:** 1.0  
**–î–∞—Ç–∞:** 2025-01-20
